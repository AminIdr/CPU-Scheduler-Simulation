<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scheduling Visualization</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <div class="container">
        <h1 class="mt-5 text-center">Scheduling Visualization</h1>

        <form id="processForm" action="/" method="POST" class="mt-4">
            <!-- Add process inputs -->
            <div class="row mb-3">
                <div class="col-md-3">
                    <label for="newProcessID" class="form-label">Process ID:</label>
                    <input type="number" name="newProcessID" id="newProcessID" class="form-control" required>
                </div>
                <div class="col-md-3">
                    <label for="newArrivalTime" class="form-label">Arrival Time:</label>
                    <input type="number" name="newArrivalTime" id="newArrivalTime" class="form-control" required>
                </div>
                <div class="col-md-3">
                    <label for="newBurstTime" class="form-label">Burst Time:</label>
                    <input type="number" name="newBurstTime" id="newBurstTime" class="form-control" required>
                </div>
                <!-- Display Priority input if algorithm is priority-based -->
                <div id="priorityInput" class="col-md-3" style="display: none;">
                    <label for="newPriority" class="form-label">Priority:</label>
                    <input type="number" name="newPriority" id="newPriority" class="form-control">
                </div>
            </div>
        
            <!-- Select algorithm -->
            <!-- Quantum input (if needed) -->
            <!-- Add Process button -->
            <div class="row mb-3">
                <div class="col-md-3">
                    <label for="algorithm" class="form-label">Select Scheduling Algorithm:</label>
                    <select name="algorithm" id="algorithm" class="form-select">
                        <option value="fcfs">First-Come, First-Served (FCFS)</option>
                        <option value="sjf">Shortest Job First (SJF)</option>
                        <option value="priority">Priority Scheduling</option>
                        <option value="rr">Round Robin (RR)</option>
                        <option value="priority_rr">Priority Scheduling + RR</option>
                    </select>
                </div>
                <div class="col-md-3" >
                    <div id="quantumInput" style="display: none;">
                        <label for="quantum" class="form-label">Quantum:</label>
                        <input type="number" name="quantum" id="quantum" class="form-control">
                    </div>
                </div>
                <div class="col-md-3">
                    <button type="submit" class="btn btn-primary">Add Process</button>
                </div>
            </div>
        
            <table class="table mt-4">
                <thead>
                    <tr>
                        <th>Process ID</th>
                        <th>Arrival Time</th>
                        <th>Burst Time</th>
                        <th id="priorityColumn">Priority</th>
                    </tr>
                </thead>
            <!-- Dynamic rows will be added here using Flask -->
            <tbody>
                <!-- Loop through processes and add rows to the table -->
                {% for process in processes %}
                <tr>
                    <td>{{ process.pid }}</td>
                    <td>{{ process.arrival_time }}</td>
                    <td>{{ process.burst_time }}</td>
                    <!-- Display Priority column if present -->
                    {% if process.priority %}
                    <td>{{ process.priority }}</td>
                    {% endif %}
                </tr>
                {% endfor %}
            </tbody>

            </table>
        </form>
        
    </div>

    <!-- Bootstrap JS (if needed) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <!-- JavaScript to toggle Priority input based on selected algorithm -->
<!-- Custom JS -->
<script src="{{ url_for('static', filename='script.js') }}"></script>

<!-- JavaScript to toggle Priority and Quantum inputs based on selected algorithm -->
    <script>
        document.getElementById('algorithm').addEventListener('change', function() {
            var algorithm = this.value;
            var quantumInput = document.getElementById('quantumInput');
            var priorityInput = document.getElementById('priorityInput');
            if (algorithm === "rr" || algorithm === "priority_rr") {
                quantumInput.style.display = 'block';
                document.getElementById('quantum').required = true;
            } else {
                quantumInput.style.display = 'none';
                document.getElementById('quantum').required = false;
            }
            if (algorithm === "priority" || algorithm === "priority_rr") {
                priorityInput.style.display = 'block';
                document.getElementById('newPriority').required = false;
            } else {
                priorityInput.style.display = 'none';
                document.getElementById('newPriority').required = false;
            }
        });
    </script>
<script>
    // Function to show or hide the priority column in the table based on the selected algorithm
    function togglePriorityColumn() {
        const algorithm = document.getElementById('algorithm').value;
        const priorityColumn = document.getElementById('priorityColumn');
        if (algorithm === 'priority' || algorithm === 'priority_rr') {
            priorityColumn.style.display = 'table-cell';
        } else {
            priorityColumn.style.display = 'none';
        }
    }
    
    // Add event listener to the algorithm select box
    document.getElementById('algorithm').addEventListener('change', togglePriorityColumn);
    
    // Call togglePriorityColumn function on page load to initialize the visibility of the priority column
    togglePriorityColumn();
    </script>
    
</body>
</html>
